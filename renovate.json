{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "prHourlyLimit": 2,
  "prConcurrentLimit": 5,
  "dependencyDashboard": true,
  "labels": [
    "dependencies",
    "renovate"
  ],
  "schedule": [
    "before 6am on monday"
  ],
  "packageRules": [
    {
      "description": "Pin ClickHouse to the exact version used by Signoz",
      "matchPackageNames": ["clickhouse/clickhouse-server"],
      "allowedVersions": "/24\\.1\\.2-alpine/",
      "groupName": "signoz-clickhouse",
      "semanticCommitScope": "signoz-clickhouse"
    },
    {
      "description": "Pin Zookeeper to the exact version used by Signoz",
      "matchPackageNames": ["clickhouse/clickhouse-server"],
      "allowedVersions": "/3\\.7\\.1/",
      "groupName": "signoz-clickhouse",
      "semanticCommitScope": "signoz-zookeeper-1"
    },
    {
      "description": "Allow only Alpine tag upgrades for all Alpine-based images",
      "matchDatasources": ["docker"],
      "packagePatterns": [".*alpine.*"],
      "allowedVersions": "/.*alpine.*/",
      "groupName": "alpine-upgrades",
      "semanticCommitScope": "{{depName}}"
    },
    {
      "description": "Pin postgres image – never upgrade",
      "matchPackageNames": ["postgres"],
      "pin": true,
      "semanticCommitScope": "postgres"
    },
    {
      "description": "Pin pgvector image – never upgrade",
      "matchPackageNames": ["pgvector/pgvector"],
      "pin": true,
      "semanticCommitScope": "pgvector"
    },
    {
      "description": "Pin pgvecto‑rs image – never upgrade",
      "matchPackageNames": ["pgvecto-rs/pgvecto-rs"],
      "pin": true,
      "semanticCommitScope": "pgvecto-rs"
    },
    {
      "description": "Default rule for all remaining Docker images",
      "matchDatasources": ["docker"],
      "groupName": "docker-images",
      "semanticCommitScope": "{{depName}}"
    }
  ],
  "customManagers": [],
  "branchNameStrict": true,
  "branchPrefix": "renovate/",
  "branchTopic": "{{service}}/{{depName}}",
  "commitMessageAction": "Update",
  "commitMessageTopic": "{{service}}/{{depName}}"
}
