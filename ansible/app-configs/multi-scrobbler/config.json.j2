{% import '../macros/rinoa-macros.j2' as vault %}
{% set vault_addr = 'https://vault.trez.wtf' %}
{% set secrets_path = 'rinoa-docker/env' %}

{
  "debugMode": false,
  "disableWeb": false,
  "sourceDefaults": {
    "logPayload": false,
    "logFilterFailure": "warn",
    "logPlayerState": false,
    "scrobbleThresholds": {
      "duration": 30,
      "percent": 20
    },
    "maxPollRetries": 1,
    "maxRequestRetries": 1,
    "retryMultiplier": 1.5
  },
  "clientDefaults": {
    "maxRequestRetries": 1,
    "retryMultiplier": 1.5
  },
  "sources": [
    {
      "type": "spotify",
      "enable": true,
      "clients": [],
      "name": "spotify",
      "data": {
        "clientId": "{{ vault.vault_secret('env', 'YOUR_SPOTIFY_ID') }}",
        "clientSecret": "{{ vault.vault_secret('env', 'YOUR_SPOTIFY_SECRET') }}",
        "redirectUri": "http://localhost:9078/callback"
      }
    },
    {
      "type": "lastfm",
      "enable": true,
      "clients": [],
      "name": "lastfm",
      "data": {
        "apiKey": "{{ vault.vault_secret('env', 'LASTFM_API_KEY') }}",
        "secret": "{{ vault.vault_secret('env', 'LASTFM_API_SECRET') }}",
        "redirectUri": "http://localhost:9078/lastfm/callback"
      }
    },
    {
      "type": "listenbrainz",
      "enable": true,
      "clients": [],
      "name": "listenBrainz",
      "data": {
        "token": "{{ vault.vault_secret('env', 'MALOJA_LISTENBRAINZ_TOKEN') }}",
        "username": "Trez.One"
      }
    },
    {
      "type": "subsonic",
      "enable": true,
      "clients": [],
      "name": "navidrome",
      "data": {
        "url": "http://navidrome:4533",
        "user": "admin",
        "password": "{{ vault.vault_secret('env', 'NAVIDROME_PASSWORD') }}"
      }
    }
  ],
  "clients": [
    {
      "type": "lastfm",
      "enable": true,
      "name": "lastFmClient",
      "data": {
        "apiKey": "{{ vault.vault_secret('env', 'LASTFM_API_KEY') }}",
        "secret": "{{ vault.vault_secret('env', 'LASTFM_API_SECRET') }}",
        "redirectUri": "http://localhost:9078/lastfm/callback"
      }
    },
    {
      "type": "listenbrainz",
      "enable": true,
      "name": "ListenBrainzClient",
      "data": {
        "token": "{{ vault.vault_secret('env', 'MALOJA_LISTENBRAINZ_TOKEN') }}",
        "username": "Trez.One"
      }
    },
    {
      "type": "maloja",
      "enable": true,
      "name": "maloja",
      "data": {
        "url": "http://maloja:42010",
        "apiKey": "{{ vault.vault_secret('env', 'MALOJA_API_KEY') }}"
      }
    }
  ],
  "webhooks": [
    {
      "name": "Gotify",
      "type": "gotify",
      "url": "http://gotify",
      "token": "{{ vault.vault_secret('env', 'MULTI_SCROBBLER_GOTIFY_TOKEN') }}",
      "priorities": {
        "info": 5,
        "warn": 7,
        "error": 10
      }
    }
  ]
}
